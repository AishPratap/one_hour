function flattenDictionary(initialKey, dictionary, flatDictionary):
  for (key : dictionary.keyset())
    value = dictionary.get(key)
    if (!isHashMapInstance(value)) //the value is a primitive
      if (initialKey == null || initialKey == "")
        flatDictionary.put(key, value)
      else
        flatDictionary.put(initialKey + "." + key, value)
    else
      if (initialKey == null || initialKey == "")
        flattenDictionary(key, value, flatDictionary)
      else
        flattenDictionary(initialKey + "." + key, value, flatDictionary)

